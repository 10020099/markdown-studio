# 📷 OCR 功能使用指南

## 概述

Markdown Studio Pro 集成了 **Tesseract.js** OCR 引擎，支持从图片中识别文字并自动插入到编辑器中。支持中文（简体）、英文等多种语言。

---

## ✨ 功能特点

- 🌏 **多语言支持**: 支持中文简体 + 英文混合识别
- 🖼️ **多格式支持**: PNG, JPG, JPEG, BMP, GIF
- 📝 **自动插入**: 识别结果自动插入到光标位置
- 🔄 **批量处理**: 支持同时识别多张图片
- 📊 **实时进度**: 显示识别进度和状态
- 💾 **离线工作**: 无需联网，完全本地处理

---

## 🚀 使用方法

### 方法一：通过菜单

1. 点击菜单栏 **🛠️ 工具**
2. 选择 **📷 OCR识别**
3. 在弹出的文件选择对话框中选择图片
4. 等待识别完成
5. 识别结果会自动插入到编辑器光标位置

### 方法二：快捷操作

1. 将光标移动到想要插入文字的位置
2. 使用菜单选择图片
3. 识别完成后文字会自动插入

---

## 📋 支持的语言

当前配置支持以下语言：

- **中文简体** (chi_sim)
- **英文** (eng)

### 添加更多语言

如果需要支持其他语言，可以修改 `renderer.js` 中的语言配置：

```javascript
// 在 ocrImage 函数中修改
ocrWorker = await Tesseract.createWorker('chi_sim+eng', 1, {
    // 可以添加更多语言，例如：
    // 'chi_tra' - 繁体中文
    // 'jpn' - 日文
    // 'kor' - 韩文
    // 'fra' - 法文
    // 'deu' - 德文
    // 'spa' - 西班牙文
});
```

---

## 🖼️ 支持的图片格式

- **PNG** (.png)
- **JPEG** (.jpg, .jpeg)
- **BMP** (.bmp)
- **GIF** (.gif)
- **TIFF** (.tiff, .tif)

---

## 💡 使用技巧

### 1. 提高识别准确率

- ✅ 使用清晰、高分辨率的图片
- ✅ 确保文字对比度高（黑字白底效果最好）
- ✅ 避免倾斜或扭曲的文字
- ✅ 图片中文字不要太小
- ✅ 避免复杂的背景

### 2. 批量处理

可以一次选择多张图片，系统会依次识别并将结果合并：

```markdown
### 图片 1: image1.png

识别的文字内容...

---

### 图片 2: image2.png

识别的文字内容...
```

### 3. 识别速度

- **首次使用**: 需要下载语言数据包（约 20-30MB），可能需要 10-30 秒
- **后续使用**: 识别速度较快，通常 2-5 秒/张
- **大图片**: 识别时间会相应增加

---

## 🔧 技术细节

### OCR 引擎

使用 **Tesseract.js v5.0+**，这是 Google Tesseract OCR 引擎的 JavaScript 移植版本。

### 工作原理

```
图片文件 → Tesseract.js → 文字识别 → Markdown 格式化 → 插入编辑器
```

### 性能优化

- **Worker 复用**: OCR Worker 会被缓存，避免重复初始化
- **异步处理**: 识别过程不会阻塞界面
- **进度显示**: 实时显示识别进度

---

## ⚠️ 注意事项

### 1. 首次使用

首次使用 OCR 功能时，需要下载语言训练数据：

- **中文简体**: ~21MB
- **英文**: ~4MB

下载过程可能需要一些时间，请耐心等待。

### 2. 识别准确率

OCR 识别准确率受多种因素影响：

- 图片质量
- 文字清晰度
- 字体类型
- 背景复杂度

建议对识别结果进行人工校对。

### 3. 内存占用

OCR 处理会占用一定内存：

- 单张图片: 约 50-100MB
- 多张图片: 内存占用会累加

处理大量图片后，建议重启应用释放内存。

### 4. 特殊字符

某些特殊字符可能无法正确识别：

- 数学公式
- 特殊符号
- 手写文字
- 艺术字体

---

## 🐛 常见问题

### Q1: 首次使用很慢？

**A**: 首次使用需要下载语言数据包，这是正常现象。数据包会被缓存，后续使用会很快。

### Q2: 识别结果不准确？

**A**: 尝试以下方法：
- 使用更清晰的图片
- 调整图片对比度
- 确保文字水平放置
- 使用更大的图片

### Q3: 支持手写文字吗？

**A**: Tesseract 主要针对印刷体文字优化，手写文字识别效果较差。

### Q4: 可以识别 PDF 吗？

**A**: 目前只支持图片格式。如需识别 PDF，请先将 PDF 转换为图片。

### Q5: 识别失败怎么办？

**A**: 检查以下几点：
- 图片格式是否支持
- 图片是否损坏
- 文件路径是否包含特殊字符
- 重启应用后重试

### Q6: 如何提高识别速度？

**A**: 
- 使用较小的图片（建议 < 2MB）
- 裁剪掉不需要的部分
- 降低图片分辨率（保持文字清晰）

---

## 📊 识别效果示例

### 优秀效果（准确率 > 95%）

- 扫描的书籍页面
- 截图的网页文字
- 清晰的文档照片
- 打印的文字材料

### 一般效果（准确率 70-95%）

- 手机拍摄的文档
- 有轻微倾斜的文字
- 背景稍复杂的图片
- 字体较小的文字

### 较差效果（准确率 < 70%）

- 手写文字
- 艺术字体
- 严重倾斜或扭曲
- 背景复杂的图片
- 模糊不清的照片

---

## 🔄 更新日志

### v2.1.0 (2025-01-XX)
- ✅ 集成 Tesseract.js OCR 引擎
- ✅ 支持中文简体 + 英文识别
- ✅ 支持批量图片处理
- ✅ 实时进度显示
- ✅ 自动插入识别结果

---

## 🌐 相关资源

- **Tesseract.js 官网**: https://tesseract.projectnaptha.com/
- **GitHub 仓库**: https://github.com/naptha/tesseract.js
- **语言数据包**: https://github.com/naptha/tessdata
- **Tesseract OCR**: https://github.com/tesseract-ocr/tesseract

---

## 💬 反馈与建议

如果您在使用 OCR 功能时遇到问题或有改进建议，欢迎：

- 提交 GitHub Issue
- 发送邮件至 support@markdownstudio.com
- 在社区论坛讨论

---

## 📝 示例工作流

### 场景：识别书籍页面

1. 用手机拍摄书籍页面
2. 将照片传输到电脑
3. 在 Markdown Studio Pro 中打开 OCR 功能
4. 选择照片
5. 等待识别完成
6. 校对并编辑识别结果
7. 保存为 Markdown 文档

### 场景：提取网页文字

1. 截图网页内容
2. 使用 OCR 识别截图
3. 获取纯文本内容
4. 继续编辑和排版

---

**祝你使用愉快！** 📷✨

如有任何问题，请随时联系我们。